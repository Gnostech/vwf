<!DOCTYPE html>

<!-- Copyright 2012 United States Government, as represented by the Secretary of Defense, Under  -->
<!-- Secretary of Defense (Personnel & Readiness).                                               -->
<!--                                                                                             -->
<!-- Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file   -->
<!-- except in compliance with the License. You may obtain a copy of the License at              -->
<!--                                                                                             -->
<!--   http://www.apache.org/licenses/LICENSE-2.0                                                -->
<!--                                                                                             -->
<!-- Unless required by applicable law or agreed to in writing, software distributed under the   -->
<!-- License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,   -->
<!-- either express or implied. See the License for the specific language governing permissions  -->
<!-- and limitations under the License.                                                          --> 

<html>
	<head>
		<title>Minesweeper</title>
		<link href="minesweeper.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript">
			$(function() {
				var gameInProgress = vwf.getProperty(vwf.find("", "/")[0], 'gameInProgress');
				$("a", ".toolstyle").button();
				$("a", ".toolstyle").button("option", "disabled", gameInProgress);
			});

			vwf_view.firedEvent = function (nodeId, eventName, eventParameters) {
				if (nodeId == vwf.find("", "/")[0] ) {
					switch (eventName) {
						case "startedGame":
							$("#startButton").button("option", "disabled", true);
							$("#winMessage").dialog("close");
							$("#loseMessage").dialog("close");
							break;
						case "wonGame":
							$("#winMessage").dialog({
							resizable: false,
							draggable: false,
							height: 110,
							width: 230
							});
							$("#startButton").button("option", "disabled", false);
							break;
						case "lostGame":
							$("#loseMessage").dialog({
							resizable: false,
							draggable: false,
							height: 110,
							width: 230
							});
							$("#startButton").button("option", "disabled", false);
							break;
					}
				}
			}
			
			function startGame() {
				vwf_view.kernel.callMethod(vwf.find("", "/")[0], "startGame");
			}
		</script>
	</head>
	<body>	
		<div id = "wrapper" class="wrapper">
			<div id="toolbar" class="toolstyle">
				<a id="startButton" href="#" role="button" onclick="startGame()">
					<span>Start</span>
				</a>
			</div>
			<div id="winMessage" style="display:none" title="You Win!">
				<span>Click the Start button to play again.</span>
			</div>
			<div id="loseMessage" style="display:none" title="You Lose!">
				<span>Click the Start button to play again.</span>
			</div>
		</div>
		<script type="text/javascript">
			$('#wrapper').appendTo('#vwf-root');
		</script>
	</body>
</html>